================================================================================
              COOK MCP WRAPPER - ARCHITECTURE DIAGRAM
           MCP Interoperability: Python â†” TypeScript â†” HTTP
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                            â”‚
â”‚                          ğŸ‘¤ USER INTERFACE                                 â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        Claude Desktop                                 â”‚ â”‚
â”‚  â”‚                   (Anthropic AI Assistant)                            â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Tools available:                                                     â”‚ â”‚
â”‚  â”‚  â€¢ search_engineering_manual                                          â”‚ â”‚
â”‚  â”‚  â€¢ get_page_direct                                                    â”‚ â”‚
â”‚  â”‚  â€¢ health_check                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                       â”‚
â”‚                                    â”‚ stdio (JSON-RPC over stdin/stdout)   â”‚
â”‚                                    â†“                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                            â”‚
â”‚                     ğŸŒ‰ PROTOCOL BRIDGE LAYER (NEW)                         â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    stdio-bridge-final.mjs                             â”‚ â”‚
â”‚  â”‚                   (Node.js + MCP SDK v1.20)                           â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Purpose: Convert stdio â†” HTTP protocols                             â”‚ â”‚
â”‚  â”‚  - Listens on stdio (line-by-line JSON-RPC)                           â”‚ â”‚
â”‚  â”‚  - Makes HTTP POST requests to mcp-lite worker                        â”‚ â”‚
â”‚  â”‚  - Handles protocol version negotiation                               â”‚ â”‚
â”‚  â”‚  - ~100 lines of JavaScript                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                       â”‚
â”‚                                    â”‚ HTTP/JSON-RPC                         â”‚
â”‚                                    â†“                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                            â”‚
â”‚           âš¡ MCP-LITE ON CLOUDFLARE WORKERS (NEW - HACK REQUIREMENT)       â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        src/index.ts                                   â”‚ â”‚
â”‚  â”‚              (TypeScript + mcp-lite v0.8.2)                           â”‚ â”‚
â”‚  â”‚            Running on: http://localhost:8787                          â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Purpose: Web-accessible MCP server                                   â”‚ â”‚
â”‚  â”‚  - Exposes tools via HTTP/JSON-RPC                                    â”‚ â”‚
â”‚  â”‚  - Proxies requests to Python HTTP API                                â”‚ â”‚
â”‚  â”‚  - Deployable to Cloudflare edge network                              â”‚ â”‚
â”‚  â”‚  - ~200 lines of TypeScript                                           â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Tools defined:                                                       â”‚ â”‚
â”‚  â”‚  â€¢ search_engineering_manual(query: string)                           â”‚ â”‚
â”‚  â”‚  â€¢ get_page_direct(page_number: number)                               â”‚ â”‚
â”‚  â”‚  â€¢ health_check()                                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                       â”‚
â”‚                                    â”‚ HTTP POST                             â”‚
â”‚                                    â†“                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                            â”‚
â”‚                    ğŸ”Œ HTTP API WRAPPER LAYER (NEW)                         â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      http_wrapper.py                                  â”‚ â”‚
â”‚  â”‚                    (Python + Flask + CORS)                            â”‚ â”‚
â”‚  â”‚             Running on: http://localhost:5001                         â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Purpose: RESTful API for Python MCP server                           â”‚ â”‚
â”‚  â”‚  - Exposes MCP functionality via HTTP                                 â”‚ â”‚
â”‚  â”‚  - Handles CORS for web access                                        â”‚ â”‚
â”‚  â”‚  - Connects to Weaviate and OpenAI                                    â”‚ â”‚
â”‚  â”‚  - ~200 lines of Python                                               â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Endpoints:                                                           â”‚ â”‚
â”‚  â”‚  GET  /health       - Health check                                    â”‚ â”‚
â”‚  â”‚  GET  /tools        - List available tools                            â”‚ â”‚
â”‚  â”‚  POST /call-tool    - Execute tool                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                       â”‚
â”‚                                    â”‚ Direct function calls                 â”‚
â”‚                                    â†“                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                            â”‚
â”‚                   ğŸ§  AI BACKEND LAYER (EXISTING)                           â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     mcp_cook_server.py                                â”‚ â”‚
â”‚  â”‚                 (Python MCP Server - stdio)                           â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Purpose: Core AI-powered document analysis                           â”‚ â”‚
â”‚  â”‚  - Original MCP server implementation                                 â”‚ â”‚
â”‚  â”‚  - Can also run standalone with Claude Desktop                        â”‚ â”‚
â”‚  â”‚  - Handles all Weaviate and OpenAI interactions                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                  â”‚                               â”‚
â”‚         â”‚ Vector search                    â”‚ Vision analysis               â”‚
â”‚         â†“                                  â†“                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   Weaviate     â”‚              â”‚  OpenAI GPT-4o      â”‚                  â”‚
â”‚  â”‚ Vector Databaseâ”‚              â”‚   Vision API        â”‚                  â”‚
â”‚  â”‚                â”‚              â”‚                     â”‚                  â”‚
â”‚  â”‚ â€¢ 150 pages    â”‚              â”‚ â€¢ Analyzes diagrams â”‚                  â”‚
â”‚  â”‚ â€¢ Embeddings   â”‚              â”‚ â€¢ Reads maps/charts â”‚                  â”‚
â”‚  â”‚ â€¢ Semantic     â”‚              â”‚ â€¢ Extracts specs    â”‚                  â”‚
â”‚  â”‚   search       â”‚              â”‚ â€¢ Max 1500 tokens   â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
                              DATA FLOW EXAMPLE
================================================================================

User asks: "Is Missouri a high wind zone?"

1. Claude Desktop â†’ stdio bridge
   â”œâ”€ Method: tools/call
   â””â”€ Params: {name: "search_engineering_manual", arguments: {query: "..."}}

2. stdio bridge â†’ mcp-lite Worker (HTTP POST)
   â”œâ”€ URL: http://localhost:8787
   â””â”€ Body: JSON-RPC request

3. mcp-lite Worker â†’ Python HTTP API (HTTP POST)
   â”œâ”€ URL: http://localhost:5001/call-tool
   â””â”€ Body: {name: "search_engineering_manual", arguments: {...}}

4. Python HTTP API â†’ Python MCP Server
   â””â”€ Calls: search_engineering_manual(query="...")

5. Python MCP Server â†’ Weaviate
   â”œâ”€ Performs vector search
   â””â”€ Retrieves 5 most relevant chunks + images

6. Python MCP Server â†’ OpenAI GPT-4o
   â”œâ”€ Sends: query + text context + base64 wind zone map image
   â””â”€ Receives: "Yes, Missouri is in Wind Zone II, requiring..."

7. Response bubbles back up through all layers
   â””â”€ Python â†’ Flask â†’ mcp-lite â†’ bridge â†’ Claude Desktop

8. User sees: Comprehensive answer with sources!

================================================================================
                            TECHNOLOGY STACK
================================================================================

Layer 1: Claude Desktop
â”œâ”€ Anthropic's AI assistant
â””â”€ MCP client via stdio

Layer 2: Protocol Bridge
â”œâ”€ Node.js v22+
â”œâ”€ @modelcontextprotocol/sdk v1.20
â””â”€ Async/await for HTTP calls

Layer 3: mcp-lite Worker â­ HACK NIGHT REQUIREMENT
â”œâ”€ TypeScript v5.7
â”œâ”€ mcp-lite v0.8.2
â”œâ”€ Cloudflare Workers runtime
â””â”€ Wrangler v3.114 (dev server)

Layer 4: HTTP API Wrapper
â”œâ”€ Python 3.10+
â”œâ”€ Flask v3.1
â”œâ”€ Flask-CORS v6.0
â””â”€ python-dotenv

Layer 5: AI Backend
â”œâ”€ weaviate-client v4.17
â”œâ”€ openai v2.2 (GPT-4o)
â””â”€ Existing PDF processing pipeline

================================================================================
                           KEY ACHIEVEMENTS
================================================================================

âœ… mcp-lite + Cloudflare Workers (hack night requirement)
âœ… Full stdio â†” HTTP protocol bridging
âœ… MCP interoperability (Python â†” TypeScript)
âœ… OpenAI Vision integration (multi-modal AI)
âœ… Vector search (Weaviate semantic search)
âœ… End-to-end working system
âœ… ~500 lines of NEW code
âœ… Built in ~2.5 hours
âœ… Production-ready pattern

================================================================================
                              QUICK START
================================================================================

# Terminal 1: Python HTTP API
cd /path/to/cook_image_query_update
source .venv/bin/activate
python http_wrapper.py
# â†’ Running on http://localhost:5001

# Terminal 2: mcp-lite Worker
cd /path/to/cook-mcp-wrapper
npm run dev
# â†’ Running on http://localhost:8787

# Terminal 3: Test
cd /path/to/cook-mcp-wrapper
./test-mcp.sh
# â†’ Tests all layers

# Use with Claude Desktop:
# 1. Edit: ~/Library/Application Support/Claude/claude_desktop_config.json
# 2. Restart Claude Desktop
# 3. See tools appear!

================================================================================
              World Wild Web MCP Hack Night - October 28, 2025
                         Cloudflare Austin, Texas
================================================================================
